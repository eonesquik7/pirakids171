<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pirakids - Gerador & Verificador</title>
<style>
  /* Reset b√°sico */
  * {
    margin: 0; padding: 0; box-sizing: border-box;
  }
  body {
    background: #000;
    font-family: Arial, sans-serif;
    color: white;
    display: flex; flex-direction: column; align-items: center;
    min-height: 100vh;
  }
  /* Cabe√ßalho com fundo branco/cinza claro */
  header {
    width: 100%;
    background: #ddd;
    color: black;
    padding: 30px 0;
    text-align: center;
  }
  #pirakids {
    font-weight: 900;
    font-size: 48px;
    cursor: pointer;
    color: #555;
    user-select: none;
    transition: color 0.3s ease;
    font-family: 'Arial Black', Gadget, sans-serif;
  }
  #pirakids:hover {
    color: #d22;
  }
  #bynesquik {
    font-weight: 600;
    font-size: 24px;
    margin-top: 5px;
    font-family: Arial, sans-serif;
  }
  #theword {
    margin-top: 10px;
    font-family: "Georgia", serif;
    font-size: 20px;
    color: #d22;
  }
  #theword::after {
    content: "...";
  }

  /* Conte√∫do principal fundo preto */
  main {
    flex: 1;
    width: 100%;
    max-width: 700px;
    background: #000;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Blocos de se√ß√£o */
  .section {
    width: 100%;
    background: #111;
    padding: 20px;
    border-radius: 8px;
    margin-top: 20px;
  }

  /* BOT√ïES */
  button {
    background: #d22;
    border: none;
    padding: 10px 20px;
    color: white;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    margin-top: 10px;
    font-size: 16px;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #a11;
  }

  /* INPUTS E SELECTS */
  input[type="number"], select {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    margin-bottom: 15px;
    border-radius: 5px;
    border: none;
    font-size: 16px;
    background: #222;
    color: white;
  }

  /* Output texto area */
  #gen-output, #check-output {
    background: #222;
    color: #eee;
    padding: 15px;
    border-radius: 6px;
    font-family: monospace;
    max-height: 200px;
    overflow-y: auto;
    white-space: pre-wrap;
  }

  /* Estilos verifica√ß√£o √∫nica - cart√£o */
  #single-checker {
    background: #222;
    border-radius: 10px;
    padding: 20px;
    margin-top: 20px;
    width: 100%;
    max-width: 400px;
    box-shadow: 0 0 15px #d22;
  }
  #single-checker label {
    display: block;
    margin-bottom: 8px;
    font-weight: bold;
  }
  #single-checker input {
    width: 100%;
    margin-bottom: 15px;
  }
  #single-checker .card-image {
    margin-top: 15px;
    text-align: center;
    color: #d22;
    font-weight: bold;
  }

  /* Centralizar output e inputs do verificador em massa */
  #mass-checker {
    width: 100%;
    margin-top: 20px;
  }

</style>
</head>
<body>

<header>
  <div id="pirakids" title="Clique 3 vezes para alternar modos">Pirakids</div>
  <div id="bynesquik">By nesquik</div>
  <div id="theword">The word is yours</div>
</header>

<main>
  <!-- Gerador de cart√µes -->
  <section id="generator" class="section">
    <h2>Gerador de Cart√µes</h2>
    <label for="card-quantity">Quantos cart√µes deseja gerar? (1-100)</label>
    <input type="number" id="card-quantity" min="1" max="100" value="5" />
    
    <label for="card-brand">Selecione a bandeira:</label>
    <select id="card-brand">
      <option value="visa">Visa</option>
      <option value="mastercard">Mastercard</option>
    </select>

    <button id="btn-generate">Gerar Cart√µes</button>

    <pre id="gen-output" aria-live="polite" aria-atomic="true"></pre>
  </section>

  <!-- Verificador em Massa -->
  <section id="mass-checker" class="section" style="display:none;">
    <h2>Verifica√ß√£o em Massa</h2>
    <textarea id="mass-input" rows="6" placeholder="Cole os cart√µes aqui, 1 por linha, formato: n√∫mero|mm/aa|cvv"></textarea>
    <button id="btn-mass-check">Verificar em Massa</button>
    <pre id="check-output"></pre>
  </section>

  <!-- Verifica√ß√£o √önica -->
  <section id="single-checker" style="display:none;">
    <h2>Verifica√ß√£o √önica</h2>
    <label for="single-number">N√∫mero do Cart√£o</label>
    <input type="text" id="single-number" maxlength="19" placeholder="N√∫mero do cart√£o" />
    <label for="single-validity">Validade (MM/AA)</label>
    <input type="text" id="single-validity" maxlength="5" placeholder="MM/AA" />
    <label for="single-cvv">CVV</label>
    <input type="text" id="single-cvv" maxlength="3" placeholder="CVV" />
    <button id="btn-single-check">Verificar</button>
    <div class="card-image" id="single-card-image"></div>
    <pre id="single-check-result"></pre>
  </section>
</main>

<script>
  // Controle de cliques no Pirakids para alternar se√ß√µes
  let clickCount = 0;
  const pirakidsEl = document.getElementById('pirakids');
  const generatorSection = document.getElementById('generator');
  const massCheckerSection = document.getElementById('mass-checker');
  const singleCheckerSection = document.getElementById('single-checker');

  pirakidsEl.addEventListener('click', () => {
    clickCount++;
    if (clickCount === 3) {
      // Alterna entre gerador -> verificador em massa -> verificador √∫nico
      if (generatorSection.style.display !== 'none') {
        generatorSection.style.display = 'none';
        massCheckerSection.style.display = 'block';
        singleCheckerSection.style.display = 'none';
      } else if (massCheckerSection.style.display !== 'none') {
        generatorSection.style.display = 'none';
        massCheckerSection.style.display = 'none';
        singleCheckerSection.style.display = 'block';
      } else {
        generatorSection.style.display = 'block';
        massCheckerSection.style.display = 'none';
        singleCheckerSection.style.display = 'none';
      }
      clickCount = 0;
    }
  });

  // Mudar cor ao passar mouse
  pirakidsEl.addEventListener('mouseenter', () => {
    pirakidsEl.style.color = '#d22';
  });
  pirakidsEl.addEventListener('mouseleave', () => {
    pirakidsEl.style.color = '#555';
  });

  // GERADOR DE CART√ïES

  // Fun√ß√£o para gerar n√∫meros aleat√≥rios entre min e max (inteiros)
  function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  // Fun√ß√£o para gerar validade MM/AA (m√™s 01-12, ano 23-28)
  function generateValidity() {
    const month = randomInt(1,12).toString().padStart(2,'0');
    const year = randomInt(23,28).toString();
    return `${month}/${year}`;
  }

  // Fun√ß√£o para gerar CVV 3 d√≠gitos
  function generateCVV() {
    return randomInt(100,999).toString();
  }

  // Fun√ß√£o para calcular o d√≠gito Luhn para um n√∫mero sem o √∫ltimo d√≠gito
  function calculateLuhnDigit(number) {
    const digits = number.split('').map(d => parseInt(d));
    let sum = 0;
    // Luhn process (de tr√°s pra frente)
    for (let i = digits.length - 1, j=0; i >= 0; i--, j++) {
      let digit = digits[i];
      if (j % 2 === 0) { // posi√ß√£o par contando do fim (0-based)
        digit *= 2;
        if (digit > 9) digit -= 9;
      }
      sum += digit;
    }
    const mod = sum % 10;
    return (mod === 0) ? 0 : (10 - mod);
  }

  // Fun√ß√£o para gerar n√∫mero do cart√£o (Visa come√ßa com 4, Mastercard come√ßa com 5)
  // Gera n√∫mero "realista" e v√°lido pelo Luhn
  function generateCardNumber(brand) {
    let prefix = brand === 'visa' ? '4' : '5';
    let number = prefix;
    // Completa at√© 15 d√≠gitos (sem o √∫ltimo)
    while (number.length < 15) {
      number += randomInt(0,9).toString();
    }
    const checkDigit = calculateLuhnDigit(number);
    return number + checkDigit.toString();
  }

  // Evento bot√£o gerar cart√µes
  document.getElementById('btn-generate').addEventListener('click', () => {
    const qtyInput = document.getElementById('card-quantity');
    const qty = parseInt(qtyInput.value);
    const brand = document.getElementById('card-brand').value;

    if (isNaN(qty) || qty < 1 || qty > 100) {
      alert('Por favor, digite uma quantidade entre 1 e 100.');
      qtyInput.focus();
      return;
    }

    let output = '';
    for(let i=0; i < qty; i++) {
      const number = generateCardNumber(brand);
      const validity = generateValidity();
      const cvv = generateCVV();
      output += `${number}|${validity}|${cvv}\n`;
    }
    document.getElementById('gen-output').textContent = output.trim();
  });


  // VERIFICADOR √öNICO

  // Fun√ß√£o para validar Luhn
  function isValidLuhn(num) {
    let sum = 0;
    let alt = false;
    for(let i = num.length - 1; i >= 0; i--) {
      let digit = parseInt(num.charAt(i));
      if (alt) {
        digit *= 2;
        if(digit > 9) digit -= 9;
      }
      sum += digit;
      alt = !alt;
    }
    return sum % 10 === 0;
  }

  // Identificar bandeira pelo primeiro d√≠gito
  function getBrand(number) {
    if(number.startsWith('4')) return 'Visa';
    if(number.startsWith('5')) return 'Mastercard';
    return 'Desconhecida';
  }

  // Evento bot√£o verifica√ß√£o √∫nica
  document.getElementById('btn-single-check').addEventListener('click', () => {
    const num = document.getElementById('single-number').value.replace(/\D/g,'');
    const val = document.getElementById('single-validity').value.trim();
    const cvv = document.getElementById('single-cvv').value.trim();

    const resultEl = document.getElementById('single-check-result');
    const imageEl = document.getElementById('single-card-image');

    if (!num || num.length < 13 || num.length > 19) {
      alert('N√∫mero do cart√£o inv√°lido.');
      return;
    }
    if (!val.match(/^(0[1-9]|1[0-2])\/\d{2}$/)) {
      alert('Validade deve estar no formato MM/AA.');
      return;
    }
    if (!cvv.match(/^\d{3}$/)) {
      alert('CVV inv√°lido.');
      return;
    }

    const brand = getBrand(num);
    const validLuhn = isValidLuhn(num);
    let validityMsg = '';
    const [mm, yy] = val.split('/');
    // Validade simples: m√™s entre 1 e 12, ano >= 23 (2023)
    const currentYear = new Date().getFullYear() % 100;
    const currentMonth = new Date().getMonth() + 1;

    let validDate = false;
    if (parseInt(mm) >= 1 && parseInt(mm) <= 12) {
      if (parseInt(yy) > currentYear || (parseInt(yy) === currentYear && parseInt(mm) >= currentMonth)) {
        validDate = true;
      }
    }
    validityMsg = validDate ? 'Validade dentro do prazo.' : 'Validade expirada ou inv√°lida.';

    // Mostrar resultado
    resultEl.textContent = 
      `Bandeira: ${brand}\n` +
      `N√∫mero v√°lido (Luhn): ${validLuhn ? 'Sim' : 'N√£o'}\n` +
      `Validade: ${validityMsg}\n` +
      `CVV: ${cvv}`;

    // Mostrar "imagem" simb√≥lica da bandeira
    if (brand === 'Visa') {
      imageEl.textContent = 'üí≥ Visa';
    } else if (brand === 'Mastercard') {
      imageEl.textContent = 'üí≥ Mastercard';
    } else {
      imageEl.textContent = '‚ùì Desconhecida';
    }
  });


  // VERIFICA√á√ÉO EM MASSA

  // Evento bot√£o verificar em massa
  document.getElementById('btn-mass-check').addEventListener('click', () => {
    const input = document.getElementById('mass-input').value.trim();
    const outputEl = document.getElementById('check-output');

    if (!input) {
      alert('Cole os cart√µes para verificar.');
      return;
    }

    const lines = input.split('\n');
    let result = '';

    for (let i=0; i<lines.length; i++) {
      const line = lines[i].trim();
      if (!line) continue;
      const parts = line.split('|');
      if (parts.length !== 3) {
        result += `Linha ${i+1}: Formato inv√°lido\n`;
        continue;
      }
      const [num, val, cvv] = parts;
      const brand = getBrand(num);
      const validLuhn = isValidLuhn(num);
      let validityMsg = '';

      // Validade simples como no √∫nico
      const valMatch = val.match(/^(0[1-9]|1[0-2])\/\d{2}$/);
      let validDate = false;
      if (valMatch) {
        const [mm, yy] = val.split('/');
        const currentYear = new Date().getFullYear() % 100;
        const currentMonth = new Date().getMonth() + 1;
        if (parseInt(mm) >= 1 && parseInt(mm) <= 12) {
          if (parseInt(yy) > currentYear || (parseInt(yy) === currentYear && parseInt(mm) >= currentMonth)) {
            validDate = true;
          }
        }
      }
      validityMsg = validDate ? 'Validade dentro do prazo.' : 'Validade expirada ou inv√°lida.';

      result += `Linha ${i+1}: Bandeira: ${brand} | Luhn: ${validLuhn ? 'OK' : 'Inv√°lido'} | ${validityMsg} | CVV: ${cvv}\n`;
    }

    outputEl.textContent = result.trim();
  });
</script>

</body>
</html>

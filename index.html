<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Gerador e Verificador de Cartões</title>
<style>
  body {
    background: #000;
    color: #fff;
    font-family: monospace, monospace;
    margin: 20px;
  }
  h2 {
    color: #f00;
    margin-bottom: 10px;
    text-align: center;
  }
  .container {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    justify-content: center;
  }
  .box {
    background: #111;
    border: 2px solid #f00;
    border-radius: 8px;
    padding: 15px;
    width: 400px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
  }
  label {
    margin-top: 10px;
  }
  input[type="number"],
  select,
  textarea {
    margin-top: 5px;
    background: #222;
    border: 1px solid #f00;
    color: #fff;
    padding: 6px;
    font-family: monospace, monospace;
    font-size: 14px;
    border-radius: 4px;
    resize: none;
  }
  input[type="number"] {
    width: 100%;
  }
  textarea {
    width: 100%;
    height: 150px;
    font-size: 13px;
  }
  button {
    margin-top: 15px;
    padding: 10px;
    background: #f00;
    border: none;
    color: #fff;
    font-weight: bold;
    cursor: pointer;
    border-radius: 5px;
    font-family: monospace, monospace;
    font-size: 14px;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background: #c00;
  }
  .result {
    margin-top: 15px;
    background: #222;
    border: 1px solid #f00;
    padding: 10px;
    height: 150px;
    overflow-y: auto;
    white-space: pre-wrap;
    font-size: 14px;
  }
</style>
</head>
<body>

<div class="container">
  <!-- Gerador de cartões -->
  <div class="box" id="generator-box">
    <h2>Gerador de Cartões</h2>

    <label for="select-brand">Selecione a bandeira:</label>
    <select id="select-brand">
      <option value="random">Aleatório</option>
      <option value="visa">Visa</option>
      <option value="mastercard">MasterCard</option>
      <option value="amex">American Express</option>
      <option value="discover">Discover</option>
      <option value="diners">Diners Club</option>
      <option value="jcb">JCB</option>
      <option value="elo">Elo</option>
      <option value="hiper">Hiper</option>
      <option value="hipercard">Hipercard</option>
    </select>

    <label for="input-quantity">Quantidade:</label>
    <input type="number" id="input-quantity" min="1" max="50" value="5" />

    <button id="btn-generate">Gerar Cartões</button>

    <pre class="result" id="generate-result"></pre>
  </div>

  <!-- Verificador de cartões -->
  <div class="box" id="checker-box">
    <h2>Verificador de Cartão Único</h2>

    <label for="single-number">Número do cartão:</label>
    <input type="number" id="single-number" placeholder="Número (somente dígitos)" />

    <label for="single-validity">Validade (MM/AA):</label>
    <input type="text" id="single-validity" placeholder="Ex: 12/25" maxlength="5" />

    <label for="single-cvv">CVV:</label>
    <input type="number" id="single-cvv" placeholder="CVV" />

    <button id="btn-check">Verificar</button>

    <pre class="result" id="single-check-result"></pre>
  </div>
</div>

<!-- Verificador em massa -->
<div class="container" style="margin-top:30px; justify-content:center;">
  <div class="box" style="width: 850px;">
    <h2>Verificador de Cartões em Massa</h2>

    <label for="mass-input">Cole os cartões (formato: número|MM/AA|CVV) — um por linha:</label>
    <textarea id="mass-input" placeholder="Exemplo: 4111111111111111|12/25|123"></textarea>

    <button id="btn-mass-check">Verificar em Massa</button>

    <pre class="result" id="mass-check-output"></pre>
  </div>
</div>

<script>
  // Função Luhn
  function isValidLuhn(num) {
    let sum = 0, alt = false;
    for (let i = num.length - 1; i >= 0; i--) {
      let n = parseInt(num.charAt(i), 10);
      if (alt) {
        n *= 2;
        if (n > 9) n -= 9;
      }
      sum += n;
      alt = !alt;
    }
    return (sum % 10 === 0);
  }

  // Validar data validade MM/AA
  function isValidDate(str) {
    if (!/^\d{2}\/\d{2}$/.test(str)) return false;
    const [mm, aa] = str.split('/').map(x => parseInt(x, 10));
    if (mm < 1 || mm > 12) return false;
    const currentYear = new Date().getFullYear() % 100;
    return aa >= currentYear;
  }

  // Detecta bandeira por prefixo e tamanho
  function getBrandByNumber(num) {
    const len = num.length;
    if (/^4/.test(num) && (len === 13 || len === 16 || len === 19)) return 'Visa';
    if (/^5[1-5]/.test(num) && len === 16) return 'MasterCard';
    if (/^3[47]/.test(num) && len === 15) return 'American Express';
    if (/^6(?:011|5)/.test(num) && len === 16) return 'Discover';
    if (/^3(?:0[0-5]|[68])/.test(num) && len === 14) return 'Diners Club';
    if (/^(?:2131|1800|35)/.test(num) && (len === 15 || len === 16)) return 'JCB';
    if (/^4011(78|79)/.test(num)) return 'Elo';
    if (/^(3841|60)/.test(num)) return 'Hiper';
    if (/^606282/.test(num)) return 'Hipercard';
    return 'Desconhecida';
  }

  // Gerar cartão válido para cada bandeira
  function generateCard(brand) {
    let prefix = '';
    let length = 16;

    switch(brand) {
      case 'visa': prefix = '4'; length = 16; break;
      case 'mastercard': prefix = '5' + (Math.floor(Math.random()*5)+1); length = 16; break;
      case 'amex': prefix = (Math.random() < 0.5) ? '34' : '37'; length = 15; break;
      case 'discover': prefix = '6011'; length = 16; break;
      case 'diners': prefix = '36'; length = 14; break;
      case 'jcb': prefix = '35'; length = 16; break;
      case 'elo': prefix = '4011'; length = 16; break;
      case 'hiper': prefix = '3841'; length = 16; break;
      case 'hipercard': prefix = '606282'; length = 16; break;
      default:
        // aleatório entre visa e mastercard para random
        if (Math.random() < 0.5) {
          prefix = '4'; length = 16;
        } else {
          prefix = '5' + (Math.floor(Math.random()*5)+1); length = 16;
        }
    }

    let number = prefix;
    while (number.length < length - 1) {
      number += Math.floor(Math.random() * 10);
    }

    // Calcular dígito verificador
    function calcCheckDigit(num) {
      let sum = 0;
      let alt = true;
      for (let i = num.length - 1; i >= 0; i--) {
        let n = parseInt(num.charAt(i), 10);
        if (alt) {
          n *= 2;
          if (n > 9) n -= 9;
        }
        sum += n;
        alt = !alt;
      }
      let check = (10 - (sum % 10)) % 10;
      return check;
    }

    number += calcCheckDigit(number);

    // Gerar validade e CVV
    const now = new Date();
    const month = ('0' + (Math.floor(Math.random()*12) + 1)).slice(-2);
    const year = (now.getFullYear() + Math.floor(Math.random()*5) + 1).toString().slice(-2);
    let cvvLength = (brand === 'amex') ? 4 : 3;
    let cvv = '';
    for (let i = 0; i < cvvLength; i++) {
      cvv += Math.floor(Math.random() * 10);
    }

    return `${number}|${month}/${year}|${cvv}`;
  }

  // Eventos e lógica

  document.getElementById('btn-generate').addEventListener('click', () => {
    const brand = document.getElementById('select-brand').value;
    const qty = parseInt(document.getElementById('input-quantity').value, 10);
    if (qty < 1 || qty > 50) {
      alert('Quantidade deve ser entre 1 e 50.');
      return;
    }
    let results = [];
    for (let i = 0; i < qty; i++) {
      results.push(generateCard(brand));
    }
    document.getElementById('generate-result').textContent = results.join('\n');
  });

  document.getElementById('btn-check').addEventListener('click', () => {
    const num = document.getElementById('single-number').value.trim();
    const val = document.getElementById('single-validity').value.trim();
    const cvv = document.getElementById('single-cvv').value.trim();
    const resultEl = document.getElementById('single-check-result');

    if (!num || !val || !cvv) {
      resultEl.textContent = 'Preencha todos os campos.';
      return;
    }

    if (!/^\d+$/.test(num)) {
      resultEl.textContent = 'Número do cartão inválido (apenas dígitos).';
      return;
    }

    const brand = getBrandByNumber(num);
    const validLuhn = isValidLuhn(num);
    const validDate = isValidDate(val);

    let message = `Bandeira: ${brand}\nValidade: ${validDate ? 'Ok' : 'Inválida'}\nLuhn: ${validLuhn ? 'Válido' : 'Inválido'}`;
    resultEl.textContent = message;
  });

  document.getElementById('btn-mass-check').addEventListener('click', () => {
    const input = document.getElementById('mass-input').value.trim();
    const output = [];
    if (!input) {
      alert('Cole os cartões para verificar.');
      return;
    }
    const lines = input.split('\n');

    for(let line of lines) {
      line = line.trim();
      if (!line) continue;
      // Espera formato: número|MM/AA|CVV
      const parts = line.split('|').map(p => p.trim());
      if(parts.length !== 3) {
        output.push(`[Inválido] Formato incorreto: ${line}`);
        continue;
      }
      const [num, val, cvv] = parts;
      const numClean = num.replace(/\D/g,'');
      if(numClean.length < 13 || numClean.length > 19) {
        output.push(`[Inválido] Número inválido: ${line}`);
        continue;
      }
      const brand = getBrandByNumber(numClean);
      const validLuhn = isValidLuhn(numClean);
      const validDate = isValidDate(val);
      let validityMsg = validDate ? 'Validade ok' : 'Validade inválida';

      output.push(`${num} | ${val} | ${cvv} -> ${brand} | Luhn: ${validLuhn ? 'Ok' : 'Inválido'} | ${validityMsg}`);
    }
    document.getElementById('mass-check-output').textContent = output.join('\n');
  });
</script>

</body>
</html>

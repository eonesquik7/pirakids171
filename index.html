<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>Gerador de Senhas Únicas com Codinomes Aleatórios</title>
<style>
  body {
    background-color: #121212;
    color: #00ffcc;
    font-family: Arial, sans-serif;
    padding: 20px;
  }
  h1 {
    color: #00ffcc;
  }
  input, button {
    padding: 10px;
    margin: 5px 10px 15px 0;
    border: none;
    border-radius: 5px;
    font-size: 16px;
  }
  input[type="number"] {
    width: 100px;
  }
  button {
    background-color: #00ffcc;
    color: #000;
    cursor: pointer;
  }
  textarea {
    width: 100%;
    height: 400px;
    background-color: #1e1e1e;
    color: #00ffcc;
    font-family: monospace;
    font-size: 16px;
    padding: 10px;
    border-radius: 5px;
    resize: none;
  }
</style>
</head>
<body>
<h1>Gerador de Senhas Únicas com Codinomes Aleatórios</h1>

<label for="quantidade">Quantidade de senhas:</label>
<input type="number" id="quantidade" value="20" min="1" /><br/>

<label for="tamanho">Tamanho da senha (mínimo 6):</label>
<input type="number" id="tamanho" value="16" min="6" max="64" /><br/>

<button onclick="gerarSenhas()">Gerar Senhas</button>
<button onclick="salvarSenhas()">Salvar Senhas</button>

<textarea id="resultado" readonly placeholder="As senhas geradas aparecerão aqui..."></textarea>

<script>
  const codinomes = ['marlin', 'marlon', 'marlitto'];

  const letrasMinusculas = 'abcdefghijklmnopqrstuvwxyz';
  const letrasMaiusculas = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
  const numeros = '0123456789';
  const simbolos = '!@#$%&*()-_=+[]{}<>?';
  const caracteres = letrasMinusculas + letrasMaiusculas + numeros + simbolos;

  const leetMap = {
    'a': '4',
    'e': '3',
    'i': '1',
    'o': '0',
    't': '7',
    'l': '1',
    's': '5',
    'r': '2',
    'n': '9'
  };

  function transformarLeet(texto) {
    let resultado = '';
    for (let char of texto) {
      const lowerChar = char.toLowerCase();
      if (leetMap[lowerChar]) {
        resultado += Math.random() > 0.5 ? leetMap[lowerChar] : char;
      } else {
        resultado += char;
      }
    }
    return resultado;
  }

  function gerarSenhaNormal(tamanho) {
    let senha = '';
    for (let i = 0; i < tamanho; i++) {
      senha += caracteres.charAt(Math.floor(Math.random() * caracteres.length));
    }
    return senha;
  }

  function gerarSenhaComCodinome(tamanho, codinome) {
    const codinomeLeet = transformarLeet(codinome);
    const restante = tamanho - codinomeLeet.length;
    if (restante < 0) return codinomeLeet;

    const metade1 = Math.floor(restante / 2);
    const metade2 = restante - metade1;

    let parte1 = '';
    let parte2 = '';
    for (let i = 0; i < metade1; i++) {
      parte1 += caracteres.charAt(Math.floor(Math.random() * caracteres.length));
    }
    for (let i = 0; i < metade2; i++) {
      parte2 += caracteres.charAt(Math.floor(Math.random() * caracteres.length));
    }

    return parte1 + codinomeLeet + parte2;
  }

  function gerarSenhas() {
    const qtd = parseInt(document.getElementById('quantidade').value);
    const tamanho = parseInt(document.getElementById('tamanho').value);
    const resultado = document.getElementById('resultado');

    if (tamanho < 6) {
      resultado.value = 'O tamanho mínimo da senha é 6.';
      return;
    }
    if (qtd < 1) {
      resultado.value = 'Digite uma quantidade válida (mínimo 1).';
      return;
    }
    if (qtd > 10000) {
      if (!confirm('Você está gerando mais de 10.000 senhas, isso pode travar seu navegador. Continuar?')) {
        return;
      }
    }

    const senhasSet = new Set();
    let senhas = '';

    // A cada 11 senhas, 10 normais e 1 com codinome na posição múltipla de 11 (ex: 11, 22, 33)
    for (let i = 1; i <= qtd; i++) {
      let senha;
      let tentativas = 0;
      do {
        if (i % 11 === 0) {
          // senha com codinome
          const codinome = codinomes[Math.floor(Math.random() * codinomes.length)];
          senha = gerarSenhaComCodinome(tamanho, codinome);
        } else {
          // senha normal
          senha = gerarSenhaNormal(tamanho);
        }
        tentativas++;
        if (tentativas > 1000) {
          break;
        }
      } while (senhasSet.has(senha));
      senhasSet.add(senha);
      senhas += senha + '\n';
    }

    resultado.value = senhas;
  }

  function salvarSenhas() {
    const texto = document.getElementById('resultado').value;
    if (!texto.trim()) {
      alert('Gere as senhas primeiro!');
      return;
    }
    const blob = new Blob([texto], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'senhas.txt';
    a.click();
    URL.revokeObjectURL(url);
  }
</script>

</body>
</html>

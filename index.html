<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Site Pessoal de Vôlei</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin:0; padding:0;
    background: #f0f2f5;
    color: #222;
  }
  header {
    background:#4a90e2; color:#fff; padding:15px;
    text-align:center;
  }
  header img {
    max-width: 100%; height: auto;
    border-radius: 10px;
    max-height: 300px;
    object-fit: cover;
  }
  nav {
    background:#333;
    display:flex;
    justify-content:center;
  }
  nav button {
    background:none;
    border:none;
    color:#fff;
    padding:15px 25px;
    cursor:pointer;
    font-weight: bold;
    font-size: 16px;
    transition: background-color 0.3s;
  }
  nav button:hover, nav button.active {
    background:#4a90e2;
  }
  main {
    max-width: 1100px;
    margin: 20px auto;
    padding: 0 20px 50px 20px;
  }
  section {
    display:none;
  }
  section.active {
    display:block;
  }

  /* Cards para campeonatos */
  .card {
    background:#fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    padding: 15px;
  }
  .card h3 {
    margin-top: 0;
  }
  .card small {
    color:#666;
  }
  .card img {
    max-width: 100%;
    border-radius: 6px;
    margin-top: 10px;
  }
  /* Botões */
  button.btn {
    background:#4a90e2;
    border:none;
    color:#fff;
    padding:10px 15px;
    border-radius: 6px;
    cursor:pointer;
    margin-top: 10px;
  }
  button.btn:disabled {
    background:#ccc;
    cursor:not-allowed;
  }
  /* Inputs */
  input, select, textarea {
    padding:8px;
    margin: 5px 0 15px 0;
    width: 100%;
    box-sizing: border-box;
    border-radius: 6px;
    border: 1px solid #ccc;
    font-size: 14px;
    resize: vertical;
  }
  label {
    font-weight: bold;
  }
  .flex-row {
    display:flex;
    gap:15px;
    flex-wrap: wrap;
  }
  .flex-col {
    flex:1 1 200px;
  }

  /* Estatísticas */
  #grafico {
    max-width: 600px;
    margin-top: 20px;
  }

  /* Pequenos avisos */
  .info-box {
    background: #e7f3fe;
    border: 1px solid #b3d4fc;
    padding: 10px;
    border-radius: 5px;
    margin-bottom: 15px;
    color: #3178c6;
  }
</style>
</head>
<body>

<header>
  <h1>Meu Site Pessoal de Vôlei</h1>
  <img src="https://images.unsplash.com/photo-1596495577886-d920f1b89d09?auto=format&fit=crop&w=1050&q=80" alt="Ela jogando vôlei">
</header>

<nav>
  <button class="tab-btn active" data-target="dashboard">Dashboard</button>
  <button class="tab-btn" data-target="campeonatos">Campeonatos</button>
  <button class="tab-btn" data-target="diario">Diário & Treino</button>
  <button class="tab-btn" data-target="estatisticas">Estatísticas</button>
  <button class="tab-btn" data-target="configuracoes">Configurações</button>
</nav>

<main>
  <!-- Dashboard -->
  <section id="dashboard" class="active">
    <h2>Dashboard Pessoal</h2>
    <div id="resumoCampeonatos"></div>
    <div id="resumoTreinos"></div>
  </section>

  <!-- Campeonatos -->
  <section id="campeonatos">
    <h2>Campeonatos</h2>
    <div class="flex-row">
      <div class="flex-col">
        <label for="filtroEstado">Filtrar por Estado:</label>
        <select id="filtroEstado">
          <option value="">Todos</option>
          <option value="MG">Minas Gerais</option>
          <option value="SP">São Paulo</option>
          <option value="RJ">Rio de Janeiro</option>
          <option value="RS">Rio Grande do Sul</option>
          <option value="BA">Bahia</option>
          <!-- Pode expandir mais -->
        </select>
      </div>
      <div class="flex-col">
        <label for="filtroCidade">Filtrar por Cidade:</label>
        <input type="text" id="filtroCidade" placeholder="Digite a cidade" />
      </div>
      <div class="flex-col" style="align-self: flex-end;">
        <button class="btn" onclick="filtrarCampeonatos()">Aplicar Filtro</button>
      </div>
    </div>
    <h3>Campeonatos Futuros</h3>
    <div id="listaCampeonatosFuturos"></div>

    <h3>Campeonatos Passados</h3>
    <div id="listaCampeonatosPassados"></div>

    <hr>

    <h3>Adicionar / Editar Campeonato</h3>
    <form id="formCampeonato">
      <input type="hidden" id="campeonatoId" />
      <label>Nome:</label>
      <input type="text" id="nomeCampeonato" required />
      <label>Data:</label>
      <input type="date" id="dataCampeonato" required />
      <label>Estado (sigla):</label>
      <input type="text" id="estadoCampeonato" maxlength="2" required />
      <label>Cidade:</label>
      <input type="text" id="cidadeCampeonato" required />
      <label>Resultado (ex: Vitória, Derrota, etc):</label>
      <input type="text" id="resultadoCampeonato" />
      <label>Link de foto/video (opcional):</label>
      <input type="url" id="mediaCampeonato" placeholder="URL da foto ou vídeo" />
      <button type="submit" class="btn">Salvar Campeonato</button>
      <button type="button" class="btn" onclick="limparFormCampeonato()" style="background:#999;">Cancelar</button>
    </form>
  </section>

  <!-- Diário & Treino -->
  <section id="diario">
    <h2>Diário & Rotina de Treino</h2>

    <form id="formDiario">
      <label>Data:</label>
      <input type="date" id="dataDiario" required />
      <label>Resultado do jogo/campeonato:</label>
      <input type="text" id="resultadoDiario" placeholder="Ex: Vitória 3x1" />
      <label>Observações, lições aprendidas e metas:</label>
      <textarea id="obsDiario" rows="4" placeholder="Escreva aqui..."></textarea>
      <label>Link de foto/vídeo (opcional):</label>
      <input type="url" id="mediaDiario" placeholder="URL da foto ou vídeo" />
      <button type="submit" class="btn">Salvar Registro</button>
    </form>

    <hr>
    <h3>Registros</h3>
    <div id="listaDiario"></div>
  </section>

  <!-- Estatísticas -->
  <section id="estatisticas">
    <h2>Estatísticas Pessoais</h2>
    <div class="info-box">
      Número total de campeonatos: <span id="totalCampeonatos">0</span><br>
      Vitórias: <span id="totalVitorias">0</span><br>
      Derrotas: <span id="totalDerrotas">0</span><br>
      Outras Resultados: <span id="totalOutrosResultados">0</span>
    </div>

    <canvas id="grafico" width="600" height="300"></canvas>
  </section>

  <!-- Configurações -->
  <section id="configuracoes">
    <h2>Configurações Pessoais</h2>
    <p><em>Funcionalidade simples para futuras implementações.</em></p>
    <label>Preferência de exibição de data:</label>
    <select id="prefData">
      <option value="pt-BR">dd/mm/aaaa</option>
      <option value="en-US">mm/dd/aaaa</option>
    </select>
    <button class="btn" onclick="salvarConfiguracoes()">Salvar Preferências</button>
  </section>
</main>

<script>
  // Dados simulados / armazenados localmente
  let campeonatos = JSON.parse(localStorage.getItem('campeonatos')) || [
    {id:1, nome:"Campeonato Estadual MG", data:"2025-06-15", estado:"MG", cidade:"Belo Horizonte", resultado:"Vitória", media:"https://images.unsplash.com/photo-1521412644187-c49fa049e84d?auto=format&fit=crop&w=800&q=80"},
    {id:2, nome:"Campeonato Nacional SP", data:"2025-07-20", estado:"SP", cidade:"São Paulo", resultado:"Derrota", media:"https://images.unsplash.com/photo-1521412644187-c49fa049e84d?auto=format&fit=crop&w=800&q=80"},
    {id:3, nome:"Campeonato Internacional RJ", data:"2025-04-01", estado:"RJ", cidade:"Rio de Janeiro", resultado:"Vitória", media:"https://images.unsplash.com/photo-1521412644187-c49fa049e84d?auto=format&fit=crop&w=800&q=80"},
  ];
  let diario = JSON.parse(localStorage.getItem('diario')) || [];
  let configuracoes = JSON.parse(localStorage.getItem('configuracoes')) || { prefData: "pt-BR" };

  // Tab switching
  const tabs = document.querySelectorAll('.tab-btn');
  const sections = document.querySelectorAll('main section');
  tabs.forEach(tab => {
    tab.addEventListener('click', () => {
      tabs.forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
      const target = tab.getAttribute('data-target');
      sections.forEach(sec => {
        sec.classList.toggle('active', sec.id === target);
      });
      if(target === 'estatisticas') atualizarEstatisticas();
      if(target === 'dashboard') atualizarDashboard();
      if(target === 'campeonatos') mostrarCampeonatos();
      if(target === 'diario') mostrarDiario();
    });
  });

  // Util: Formata data para exibição conforme preferência
  function formatarData(dataStr){
    if(!dataStr) return '';
    const dt = new Date(dataStr);
    if(isNaN(dt)) return dataStr;
    if(configuracoes.prefData === 'en-US'){
      return dt.toLocaleDateString('en-US');
    }
    return dt.toLocaleDateString('pt-BR');
  }

  // Dashboard resumo campeonatos
  function atualizarDashboard(){
    // Campeonatos futuros em 30 dias
    const hoje = new Date();
    const limite = new Date(hoje.getTime() + 30*24*3600*1000);
    const futurosProximos = campeonatos.filter(c => new Date(c.data) >= hoje && new Date(c.data) <= limite);
    let html = '<h3>Próximos Campeonatos (30 dias)</h3>';
    if(futurosProximos.length === 0){
      html += '<p>Nenhum campeonato próximo.</p>';
    } else {
      futurosProximos.forEach(c => {
        html += `<div class="card"><strong>${c.nome}</strong><br>Data: ${formatarData(c.data)}<br>Local: ${c.cidade} - ${c.estado}</div>`;
      });
    }
    document.getElementById('resumoCampeonatos').innerHTML = html;

    // Treinos recentes - do diário últimas 5 entradas
    const recentes = diario.slice(-5).reverse();
    let html2 = '<h3>Últimos Registros de Treino & Diário</h3>';
    if(recentes.length === 0){
      html2 += '<p>Nenhum registro salvo.</p>';
    } else {
      recentes.forEach(r => {
        html2 += `<div class="card">${formatarData(r.data)}<br><strong>Resultado:</strong> ${r.resultado || 'N/A'}<br><strong>Observações:</strong> ${r.obs || 'Nenhuma'}<br>`;
        if(r.media) html2 += `<img src="${r.media}" alt="Media relacionada" />`;
        html2 += '</div>';
      });
    }
    document.getElementById('resumoTreinos').innerHTML = html2;
  }

  // Mostrar campeonatos com filtros
  function mostrarCampeonatos(){
    const filtroEstado = document.getElementById('filtroEstado').value.trim().toUpperCase();
    const filtroCidade = document.getElementById('filtroCidade').value.trim().toLowerCase();

    const hoje = new Date();

    function filtrar(c){
      if(filtroEstado && c.estado.toUpperCase() !== filtroEstado) return false;
      if(filtroCidade && !c.cidade.toLowerCase().includes(filtroCidade)) return false;
      return true;
    }

    // Campeonatos futuros
    const futuros = campeonatos.filter(c => new Date(c.data) >= hoje && filtrar(c)).sort((a,b) => new Date(a.data) - new Date(b.data));
    // Campeonatos passados
    const passados = campeonatos.filter(c => new Date(c.data) < hoje && filtrar(c)).sort((a,b) => new Date(b.data) - new Date(a.data));

    const containerFut = document.getElementById('listaCampeonatosFuturos');
    const containerPass = document.getElementById('listaCampeonatosPassados');

    if(futuros.length === 0) containerFut.innerHTML = '<p>Nenhum campeonato futuro encontrado com os filtros.</p>';
    else {
      containerFut.innerHTML = futuros.map(c => `
        <div class="card">
          <h3>${c.nome}</h3>
          <small>${formatarData(c.data)} - ${c.cidade}, ${c.estado}</small><br>
          <strong>Resultado:</strong> ${c.resultado || 'Ainda não realizado'}<br>
          ${c.media ? `<img src="${c.media}" alt="Foto ou vídeo" />` : ''}
          <button class="btn" onclick="editarCampeonato(${c.id})">Editar</button>
          <button class="btn" style="background:#c00;" onclick="removerCampeonato(${c.id})">Excluir</button>
        </div>
      `).join('');
    }
    if(passados.length === 0) containerPass.innerHTML = '<p>Nenhum campeonato passado encontrado com os filtros.</p>';
    else {
      containerPass.innerHTML = passados.map(c => `
        <div class="card">
          <h3>${c.nome}</h3>
          <small>${formatarData(c.data)} - ${c.cidade}, ${c.estado}</small><br>
          <strong>Resultado:</strong> ${c.resultado || 'N/A'}<br>
          ${c.media ? `<img src="${c.media}" alt="Foto ou vídeo" />` : ''}
          <button class="btn" onclick="editarCampeonato(${c.id})">Editar</button>
          <button class="btn" style="background:#c00;" onclick="removerCampeonato(${c.id})">Excluir</button>
        </div>
      `).join('');
    }
  }

  // Filtrar botão
  function filtrarCampeonatos(){
    mostrarCampeonatos();
  }

  // Form Campeonato
  document.getElementById('formCampeonato').addEventListener('submit', e=>{
    e.preventDefault();
    const id = document.getElementById('campeonatoId').value;
    const nome = document.getElementById('nomeCampeonato').value.trim();
    const data = document.getElementById('dataCampeonato').value;
    const estado = document.getElementById('estadoCampeonato').value.trim().toUpperCase();
    const cidade = document.getElementById('cidadeCampeonato').value.trim();
    const resultado = document.getElementById('resultadoCampeonato').value.trim();
    const media = document.getElementById('mediaCampeonato').value.trim();

    if(id){ // Editar existente
      let c = campeonatos.find(x=>x.id==id);
      if(c){
        c.nome = nome; c.data = data; c.estado = estado; c.cidade = cidade; c.resultado = resultado; c.media = media;
      }
    } else { // Novo
      const novo = {
        id: Date.now(),
        nome, data, estado, cidade, resultado, media
      };
      campeonatos.push(novo);
    }
    localStorage.setItem('campeonatos', JSON.stringify(campeonatos));
    limparFormCampeonato();
    mostrarCampeonatos();
    alert('Campeonato salvo!');
  });

  function limparFormCampeonato(){
    document.getElementById('campeonatoId').value = '';
    document.getElementById('nomeCampeonato').value = '';
    document.getElementById('dataCampeonato').value = '';
    document.getElementById('estadoCampeonato').value = '';
    document.getElementById('cidadeCampeonato').value = '';
    document.getElementById('resultadoCampeonato').value = '';
    document.getElementById('mediaCampeonato').value = '';
  }

  function editarCampeonato(id){
    let c = campeonatos.find(x=>x.id===id);
    if(c){
      document.getElementById('campeonatoId').value = c.id;
      document.getElementById('nomeCampeonato').value = c.nome;
      document.getElementById('dataCampeonato').value = c.data;
      document.getElementById('estadoCampeonato').value = c.estado;
      document.getElementById('cidadeCampeonato').value = c.cidade;
      document.getElementById('resultadoCampeonato').value = c.resultado || '';
      document.getElementById('mediaCampeonato').value = c.media || '';
      window.scrollTo(0, document.getElementById('formCampeonato').offsetTop);
    }
  }
  function removerCampeonato(id){
    if(confirm('Deseja realmente excluir este campeonato?')){
      campeonatos = campeonatos.filter(c=>c.id!==id);
      localStorage.setItem('campeonatos', JSON.stringify(campeonatos));
      mostrarCampeonatos();
    }
  }

  // Diário & Treino
  document.getElementById('formDiario').addEventListener('submit', e=>{
    e.preventDefault();
    const data = document.getElementById('dataDiario').value;
    const resultado = document.getElementById('resultadoDiario').value.trim();
    const obs = document.getElementById('obsDiario').value.trim();
    const media = document.getElementById('mediaDiario').value.trim();
    diario.push({id: Date.now(), data, resultado, obs, media});
    localStorage.setItem('diario', JSON.stringify(diario));
    mostrarDiario();
    alert('Registro salvo!');
    document.getElementById('formDiario').reset();
  });

  function mostrarDiario(){
    const container = document.getElementById('listaDiario');
    if(diario.length === 0){
      container.innerHTML = '<p>Nenhum registro salvo.</p>';
      return;
    }
    let html = diario.slice().reverse().map(d => `
      <div class="card">
        <strong>Data:</strong> ${formatarData(d.data)}<br>
        <strong>Resultado:</strong> ${d.resultado || 'N/A'}<br>
        <strong>Observações:</strong> ${d.obs || 'Nenhuma'}<br>
        ${d.media ? `<img src="${d.media}" alt="Media do diário" />` : ''}
      </div>
    `).join('');
    container.innerHTML = html;
  }

  // Estatísticas simples
  function atualizarEstatisticas(){
    const total = campeonatos.length;
    const vitorias = campeonatos.filter(c=>c.resultado.toLowerCase().includes('vitória')).length;
    const derrotas = campeonatos.filter(c=>c.resultado.toLowerCase().includes('derrota')).length;
    const outros = total - vitorias - derrotas;

    document.getElementById('totalCampeonatos').textContent = total;
    document.getElementById('totalVitorias').textContent = vitorias;
    document.getElementById('totalDerrotas').textContent = derrotas;
    document.getElementById('totalOutrosResultados').textContent = outros;

    // Gráfico simples com Canvas
    const canvas = document.getElementById('grafico');
    const ctx = canvas.getContext('2d');
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Cores
    const cores = ['#4a90e2','#c0392b','#7f8c8d'];
    const valores = [vitorias, derrotas, outros];
    const labels = ['Vitórias','Derrotas','Outros'];

    const totalVal = valores.reduce((a,b)=>a+b,0);
    if(totalVal === 0) {
      ctx.fillStyle = "#333";
      ctx.font = "20px Arial";
      ctx.fillText("Sem dados para gráfico", 180, 150);
      return;
    }

    // Pizza simples
    let startAngle = 0;
    const cx = canvas.width/2;
    const cy = canvas.height/2;
    const radius = 100;

    for(let i=0; i<valores.length; i++){
      const sliceAngle = (valores[i]/totalVal)*2*Math.PI;
      ctx.beginPath();
      ctx.moveTo(cx, cy);
      ctx.arc(cx, cy, radius, startAngle, startAngle+sliceAngle);
      ctx.closePath();
      ctx.fillStyle = cores[i];
      ctx.fill();

      // Legendas (círculo + texto)
      const midAngle = startAngle + sliceAngle/2;
      const dx = Math.cos(midAngle)* (radius+30);
      const dy = Math.sin(midAngle)* (radius+30);
      ctx.fillStyle = cores[i];
      ctx.beginPath();
      ctx.arc(cx+dx, cy+dy, 8, 0, 2*Math.PI);
      ctx.fill();

      ctx.fillStyle = "#000";
      ctx.font = "16px Arial";
      ctx.fillText(`${labels[i]} (${valores[i]})`, cx+dx+15, cy+dy+5);

      startAngle += sliceAngle;
    }
  }

  // Inicialização
  carregarDados();
  atualizarDashboard();
  mostrarCampeonatos();
  mostrarDiario();
  atualizarEstatisticas();

</script>

</body>
</html>
